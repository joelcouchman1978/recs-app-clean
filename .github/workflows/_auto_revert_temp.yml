name: _auto_revert_temp\non:\n  workflow_dispatch:\n    inputs:\n      sha:\n        description: Commit SHA to revert\n        required: true\n        type: string\njobs:\n  revert:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n      issues: write\n    steps:\n      - uses: actions/checkout@v4\n        with: { ref: main }\n      - name: Configure git\n        run: |\n          git config user.name "agent-bot"\n          git config user.email "actions@users.noreply.github.com"\n      - name: Revert commit\n        id: r\n        run: |\n          set -e\n          SHA="${{ inputs.sha }}"\n          if git log -1 --format=%s "$SHA" | grep -iq "\[skip-revert\]"; then\n            echo "reverted=skipped" >> $GITHUB_OUTPUT\n            exit 0\n          fi\n          if git revert --no-edit "$SHA"; then\n            git push origin HEAD:main\n            echo "reverted=true" >> $GITHUB_OUTPUT\n          else\n            echo "reverted=false" >> $GITHUB_OUTPUT\n          fi\n      - name: Open status issue\n        uses: actions/github-script@v7\n        with:\n          script: |\n            const {owner, repo} = context.repo;\n            const sha = context.payload.inputs.sha;\n            const reverted = "${{ steps.r.outputs.reverted }}";\n            const title = (reverted === "true")\n              ? ("Auto-revert: " + sha.slice(0,7) + " reverted")\n              : (reverted === "skipped" ? ("Auto-revert skipped: " + sha.slice(0,7)) : ("Auto-revert conflict: " + sha.slice(0,7)));\n            const body = (reverted === "true") ? "Revert pushed to main." : (reverted === "skipped" ? "Commit message contained [skip-revert]. No action taken." : "Revert hit conflicts â€” manual fix needed.");\n            await github.rest.issues.create({owner, repo, title, body, assignees: ['joelcouchman78'], labels: ['auto-revert']});\n      - name: Cleanup (remove self)\n        run: |\n          git rm .github/workflows/_auto_revert_temp.yml || true\n          git commit -m "chore(ci): remove temp auto-revert workflow" || true\n          git push origin HEAD:main || true