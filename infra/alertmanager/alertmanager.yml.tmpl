route:
  receiver: ${ALERT_DEFAULT_RECEIVER:-default}
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 5m
  repeat_interval: 3h

receivers:
  - name: default
    webhook_configs:
      - url: "${ALERT_WEBHOOK_URL:-http://example.invalid/webhook}"
        send_resolved: true

  # Optional native Slack receiver (uses Slack Incoming Webhook)
  - name: slack
    slack_configs:
      - api_url: "${SLACK_WEBHOOK_URL:-}"
        send_resolved: true
        title: "[{{ .Status | toUpper }}] {{ .CommonLabels.alertname }}"
        text: >-
          {{ range .Alerts -}}
          *{{ .Labels.severity | default "info" }}* {{ .Annotations.summary | default .Labels.alertname }}
          {{ if .Annotations.description }}\n{{ .Annotations.description }}{{ end }}
          | {{ .Labels.instance | default .Labels.job }}
          {{ "\n\n" -}}
          {{ end }}
